# AsterDEX Funding Rate Arbitrage Bot

**Aster Funding Rate Arbitrage - Scale in/out positions with low price spread**

‡∏ö‡∏≠‡∏ó‡πÄ‡∏ó‡∏£‡∏î Funding Rate Arbitrage ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AsterDEX ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÇ‡∏î‡∏¢‡πÄ‡∏õ‡∏¥‡∏î Short Perpetual ‡πÅ‡∏•‡∏∞ Buy Spot ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠ farm funding rate ‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏¢‡∏≠‡∏¢‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î position ‡πÅ‡∏•‡∏∞‡∏£‡∏≠ spread ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Å‡πà‡∏≠‡∏ô execute

## ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥

- **‡πÇ‡∏´‡∏°‡∏î Open**: ‡πÄ‡∏õ‡∏¥‡∏î short perpetual + buy spot ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- **‡πÇ‡∏´‡∏°‡∏î Close**: ‡∏õ‡∏¥‡∏î short perpetual + sell spot ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö spread**: ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤ perp ‡πÅ‡∏•‡∏∞ spot ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î order
- **‡∏ó‡∏¢‡∏≠‡∏¢‡∏ã‡∏∑‡πâ‡∏≠/‡∏Ç‡∏≤‡∏¢**: ‡πÅ‡∏ö‡πà‡∏á order ‡πÄ‡∏õ‡πá‡∏ô lot ‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î slippage
- **Emergency close**: ‡∏õ‡∏¥‡∏î position ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ù‡∏±‡πà‡∏á‡πÉ‡∏î‡∏ù‡∏±‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏´‡∏°‡∏î

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### 1. Clone Repository (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

### 2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies
```bash
npm install
```

‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á package ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô:
- `axios` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API
- `dotenv` - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå .env

### 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡∏à‡∏≤‡∏Å `.env.example`
```bash
cp .env.example .env
```

### 4. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÉ‡∏™‡πà API keys ‡πÅ‡∏•‡∏∞ configuration
```env
# AsterDEX API (‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á Futures ‡πÅ‡∏•‡∏∞ Spot)
ASTERDEX_API_KEY=your_api_key_here
ASTERDEX_API_SECRET=your_api_secret_here

# API URLs
FUTURES_API_URL=https://fapi.asterdex.com
SPOT_API_URL=https://sapi.asterdex.com

# Trading Config
MAX_PRICE_DIFF_PERCENT=0.1
RETRY_DELAY_MS=5000
```

### 5. ‡∏™‡∏£‡πâ‡∏≤‡∏á API Keys ‡∏à‡∏≤‡∏Å AsterDEX
- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [AsterDEX](https://asterdex.com) ‚Üí Settings ‚Üí API Management
- ‡∏™‡∏£‡πâ‡∏≤‡∏á API key 1 ‡∏ä‡∏∏‡∏î (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á Futures ‡πÅ‡∏•‡∏∞ Spot)
- ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô permissions: **Futures Trading** ‡πÅ‡∏•‡∏∞ **Spot Trading**
- Copy API key ‡πÅ‡∏•‡∏∞ Secret ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.env`

‚ö†Ô∏è **‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô**: ‡∏≠‡∏¢‡πà‡∏≤‡πÅ‡∏ä‡∏£‡πå API Secret ‡πÉ‡∏´‡πâ‡πÉ‡∏Ñ‡∏£‡πÄ‡∏´‡πá‡∏ô ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

### 6. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ position ‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡∏Å‡πà‡∏≠‡∏ô
npm run open ASTERUSDT 10 5
```

## ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡πÄ‡∏õ‡∏¥‡∏î Position (Open Mode)
```bash
npm run open <SYMBOL> <TOTAL_SIZE_USD> <LOT_SIZE_USD>
```

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡πÄ‡∏õ‡∏¥‡∏î short position $1000 ‡πÅ‡∏•‡∏∞ buy spot $1000 ‡πÇ‡∏î‡∏¢‡∏ó‡∏¢‡∏≠‡∏¢‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡∏•‡∏∞ $10 USD
```bash
npm run open BTCUSDT 1000 10
```

### ‡∏õ‡∏¥‡∏î Position (Close Mode)
```bash
npm run close <SYMBOL> <CLOSE_PERCENT> <LOT_SIZE_PERCENT>
```

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏õ‡∏¥‡∏î 100% ‡∏Ç‡∏≠‡∏á position ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÇ‡∏î‡∏¢‡∏ó‡∏¢‡∏≠‡∏¢‡∏õ‡∏¥‡∏î‡∏ó‡∏µ‡∏•‡∏∞ 2%
```bash
npm run close ASTERUSDT 100 2
```

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏õ‡∏¥‡∏î 50% ‡∏Ç‡∏≠‡∏á position ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÇ‡∏î‡∏¢‡∏ó‡∏¢‡∏≠‡∏¢‡∏õ‡∏¥‡∏î‡∏ó‡∏µ‡∏•‡∏∞ 2%
```bash
npm run close ASTERUSDT 50 2
```

### Debug Mode
‡πÄ‡∏û‡∏¥‡πà‡∏° flag `--debug` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á debug logs:
```bash
npm run open BTCUSDT 1000 10 --debug
```

Debug mode ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á:
- Quantity rounding details
- Order request parameters ‡πÅ‡∏•‡∏∞ signature
- Order response ‡∏à‡∏≤‡∏Å API
- Updated order status (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏ã‡πâ‡∏≥)

## ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå

### ‡πÇ‡∏´‡∏°‡∏î Open
- **SYMBOL**: ‡∏Ñ‡∏π‡πà‡πÄ‡∏ó‡∏£‡∏î ‡πÄ‡∏ä‡πà‡∏ô BTCUSDT, ETHUSDT, ASTERUSDT
- **TOTAL_SIZE_USD**: ‡∏Ç‡∏ô‡∏≤‡∏î position ‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î (‡∏´‡∏ô‡πà‡∏ß‡∏¢ USD)
- **LOT_SIZE_USD**: ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ lot ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏¢‡∏≠‡∏¢‡πÄ‡∏õ‡∏¥‡∏î (‡∏´‡∏ô‡πà‡∏ß‡∏¢ USD)

**‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏õ‡πá‡∏ô USD** - ‡∏ö‡∏≠‡∏ó‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì quantity ‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

‚ö†Ô∏è **‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î**:
- **Minimum order size**: $5 USD ‡∏ï‡πà‡∏≠ order
- ‡∏ñ‡πâ‡∏≤ lot ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ $5 USD ‡∏ö‡∏≠‡∏ó‡∏à‡∏∞‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ö lot ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‡∏ñ‡πâ‡∏≤ balance ‡πÑ‡∏°‡πà‡∏û‡∏≠ bot ‡∏à‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á summary

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**:
- ‚úÖ `TOTAL_SIZE_USD=20, LOT_SIZE_USD=5` ‚Üí 4 lots ‡∏Ç‡∏ô‡∏≤‡∏î $5 ‡πÅ‡∏ï‡πà‡∏•‡∏∞ lot
- ‚úÖ `TOTAL_SIZE_USD=20, LOT_SIZE_USD=6` ‚Üí 3 lots ($6 + $6 + $8) - lot ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡∏£‡∏ß‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### ‡πÇ‡∏´‡∏°‡∏î Close
- **SYMBOL**: ‡∏Ñ‡∏π‡πà‡πÄ‡∏ó‡∏£‡∏î ‡πÄ‡∏ä‡πà‡∏ô ASTERUSDT
- **CLOSE_PERCENT**: ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Ç‡∏≠‡∏á position ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î (0-100)
- **LOT_SIZE_PERCENT**: ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ lot ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏¢‡∏≠‡∏¢‡∏õ‡∏¥‡∏î

**‡πÉ‡∏ä‡πâ Percentage ‡πÅ‡∏ó‡∏ô USD** - ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏¥‡∏î position ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡∏±‡πà‡∏á‡πÉ‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (hedge ratio ‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°)

‚ö†Ô∏è **‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î**:
- **Minimum order size**: $5 USD ‡∏ï‡πà‡∏≠‡∏ù‡∏±‡πà‡∏á
- ‡∏ñ‡πâ‡∏≤ lot ‡πÅ‡∏£‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ $5 USD ‚Üí bot ‡∏à‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏° lotSizePercent
- ‡∏ñ‡πâ‡∏≤ lot ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ $5 USD ‚Üí bot ‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á**:
- ‚úÖ `CLOSE_PERCENT=100, LOT_SIZE_PERCENT=20` ‚Üí ‡∏õ‡∏¥‡∏î 100% ‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡∏∞ 20% = 5 lots
- ‚úÖ `CLOSE_PERCENT=50, LOT_SIZE_PERCENT=10` ‚Üí ‡∏õ‡∏¥‡∏î 50% ‡πÉ‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡∏∞ 10% = 5 lots
- ‚ùå `CLOSE_PERCENT=100, LOT_SIZE_PERCENT=5` ‚Üí ‡∏ñ‡πâ‡∏≤ position ‡πÄ‡∏•‡πá‡∏Å lot ‡∏≠‡∏≤‡∏à‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ $5

## Configuration (.env)

### API Configuration
- `ASTERDEX_API_KEY`: API key ‡∏à‡∏≤‡∏Å AsterDEX (‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á Futures ‡πÅ‡∏•‡∏∞ Spot)
- `ASTERDEX_API_SECRET`: API secret ‡∏à‡∏≤‡∏Å AsterDEX
- `FUTURES_API_URL`: Futures API endpoint (default: `https://fapi.asterdex.com`)
- `SPOT_API_URL`: Spot API endpoint (default: `https://sapi.asterdex.com`)

### Trading Configuration
- `MAX_PRICE_DIFF_PERCENT`: % ‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á futures ‡πÅ‡∏•‡∏∞ spot (default: `0.1`)
  - ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: `0.1` = ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 0.1%
- `RETRY_DELAY_MS`: ‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö spread ‡πÉ‡∏´‡∏°‡πà (milliseconds, default: `5000`)
  - ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: `5000` = ‡∏£‡∏≠ 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏Å‡πà‡∏≠‡∏ô retry
  - ‡∏ö‡∏≠‡∏ó‡∏à‡∏∞ retry ‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏à‡∏≠ spread ‡∏ó‡∏µ‡πà‡∏î‡∏µ

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

```
.
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ futures.js       # Futures API client
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ spot.js          # Spot API client
‚îÇ   ‚îú‚îÄ‚îÄ strategies/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openPosition.js  # ‡πÄ‡∏õ‡∏¥‡∏î position strategy
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ closePosition.js # ‡∏õ‡∏¥‡∏î position strategy
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ priceChecker.js  # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö spread
‚îÇ   ‚îî‚îÄ‚îÄ index.js             # Entry point
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

## ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### ‡πÇ‡∏´‡∏°‡∏î Open (‡πÄ‡∏õ‡∏¥‡∏î Position)
1. ‡∏ö‡∏≠‡∏ó‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö spread ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á futures ‡πÅ‡∏•‡∏∞ spot
2. ‡∏ñ‡πâ‡∏≤ spread ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ `MAX_PRICE_DIFF_PERCENT` ‡∏à‡∏∞‡∏£‡∏≠‡πÅ‡∏•‡∏∞ retry ‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ
3. ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠ spread ‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î market order ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡∏±‡πà‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô:
   - Futures: ‡πÄ‡∏õ‡∏¥‡∏î SHORT
   - Spot: BUY
4. ‡∏ó‡∏¢‡∏≠‡∏¢‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏µ‡∏•‡∏∞ lot ‡∏ï‡∏≤‡∏° `LOT_SIZE_USD` ‡∏à‡∏ô‡∏Ñ‡∏£‡∏ö `TOTAL_SIZE_USD`
5. ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢

### ‡πÇ‡∏´‡∏°‡∏î Close (‡∏õ‡∏¥‡∏î Position)
1. **Fetch position ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô**: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• futures ‡πÅ‡∏•‡∏∞ spot position
2. **‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì target**: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì quantity ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡∏° percentage
3. **‡∏£‡∏≠ spread ‡∏ó‡∏µ‡πà‡∏î‡∏µ**: ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÇ‡∏´‡∏°‡∏î open
4. **‡∏ó‡∏¢‡∏≠‡∏¢‡∏õ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô %**: ‡∏õ‡∏¥‡∏î market order ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡∏±‡πà‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏ï‡∏≤‡∏° lot percentage
   - Futures: ‡∏õ‡∏¥‡∏î SHORT (BUY)
   - Spot: SELL
   - ‡∏£‡∏±‡∏Å‡∏©‡∏≤ hedge ratio ‡πÄ‡∏î‡∏¥‡∏° (‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤ position ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô 30/70 ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏î ‡∏Å‡πá‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
5. **Smart handling**:
   - ‡∏ñ‡πâ‡∏≤ lot ‡πÅ‡∏£‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ $5 ‚Üí ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏° lot size
   - ‡∏ñ‡πâ‡∏≤ lot ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ $5 ‚Üí ‡∏õ‡∏¥‡∏î futures ‡∏î‡πâ‡∏ß‡∏¢ reduceOnly, spot ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏¥‡∏î‡πÄ‡∏≠‡∏á‡πÉ‡∏ô UI
6. ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢

## ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

### üìä Progress Tracking
- ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç lot ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô/‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÄ‡∏ä‡πà‡∏ô "Lot 1/4")
- ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤ spread ‡∏ó‡∏µ‡πà‡∏û‡∏ö‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤ futures/spot
- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
- ‡πÉ‡∏ä‡πâ emoji ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ (üü¢ ‡πÄ‡∏õ‡∏¥‡∏î position, üî¥ ‡∏õ‡∏¥‡∏î position)

### üîÑ Auto Retry & Smart Order Handling
- ‡∏£‡∏≠ spread ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (retry ‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏à‡∏≠ spread ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤)
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö order status ‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏á order 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏Å‡∏£‡∏ì‡∏µ order ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà execute
- ‡∏Ç‡πâ‡∏≤‡∏° lot ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ $5 USD ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô error

### üîí Emergency Close (‡πÇ‡∏´‡∏°‡∏î Close ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö position ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡∏±‡πà‡∏á‡∏Å‡πà‡∏≠‡∏ô execute ‡πÅ‡∏ï‡πà‡∏•‡∏∞ lot
- ‡∏ñ‡πâ‡∏≤‡∏ù‡∏±‡πà‡∏á‡πÉ‡∏î‡∏ù‡∏±‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏´‡∏°‡∏î (‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ $1 USD) ‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡∏≠‡∏µ‡∏Å‡∏ù‡∏±‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

## ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

‚ö†Ô∏è **‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô**
- ‡∏ö‡∏≠‡∏ó‡πÉ‡∏ä‡πâ **Market Order** - ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏ï‡∏≠‡∏ô execute
- ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô **USD** - ‡∏ö‡∏≠‡∏ó‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì quantity ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‡∏ö‡∏≠‡∏ó‡∏à‡∏∞ **retry ‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ** ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏à‡∏≠ spread ‡∏ó‡∏µ‡πà‡∏î‡∏µ (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î)
- **Minimum order size**: $5 USD (‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å skip)

‚ö†Ô∏è **‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á**
- ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ balance ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏ó‡∏±‡πâ‡∏á Futures (margin) ‡πÅ‡∏•‡∏∞ Spot
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API permissions ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Futures ‡πÅ‡∏•‡∏∞ Spot trading
- ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ amount ‡∏ô‡πâ‡∏≠‡∏¢‡πÜ ‡∏Å‡πà‡∏≠‡∏ô ($5-$20 USD)
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö position ‡πÉ‡∏ô AsterDEX ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å execute ‡πÄ‡∏™‡∏£‡πá‡∏à

üí° **‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö**
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `MAX_PRICE_DIFF_PERCENT` ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏° volatile ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç
- ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏ó‡∏µ‡πà‡∏°‡∏µ volume ‡∏™‡∏π‡∏á ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ `0.05-0.1%`
- ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏ó‡∏µ‡πà‡∏°‡∏µ volume ‡∏ï‡πà‡∏≥ ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á `0.2-0.5%`
- ‡∏õ‡∏£‡∏±‡∏ö `RETRY_DELAY_MS` ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤
- ‡∏ï‡∏±‡πâ‡∏á `TOTAL_SIZE_USD` ‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏£‡∏•‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏±‡∏ö `LOT_SIZE_USD` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ lot ‡∏ó‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ $5 USD
- ‡πÉ‡∏ä‡πâ `--debug` flag ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π debug logs ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤
